var CIAPI=CIAPI||{};CIAPI.__testData=(function(){var e,b=[],c={minute:[]},a=function(g){var h=Math.random()>0.5?1:-1;return g.Close+(h*g.Close*0.05)},f=function(j,h){var g={minute:1000*60,hour:1000*60*60,day:1000*60*60*24};var i=new Date(j.BarDate.getTime()-g[h]);var k=a(j);return{BarDate:i,Close:k,High:k*1.1,Low:k*0.9,Open:j.Close}},d={BarDate:new Date(),Close:1.6283,High:1.6285,Low:1.6283,Open:1.6284};for(e=0;e<=1000;e++){c.minute.push(d);d=f(d,"minute");b.push({MarketId:10000+e,Name:"{marketName} CFD #"+(e+1)})}return{PriceBars:c,MarketList:b}})();var CIAPI=CIAPI||{};CIAPI.dojo={};(function(){var f=CIAPI.dojo,c=Object.prototype.toString;f.isArray=function(d){return d&&(d instanceof Array||typeof d=="array")};f.isFunction=function(d){return c.call(d)==="[object Function]"};f._extraNames=a=a||["hasOwnProperty","valueOf","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","constructor"];var a=f._extraNames,b=a.length,e={};f.clone=function(m){if(!m||typeof m!="object"||f.isFunction(m)){return m}if(m.nodeType&&"cloneNode" in m){return m.cloneNode(true)}if(m instanceof Date){return new Date(m.getTime())}if(m instanceof RegExp){return new RegExp(m)}var k,h,d,j,g;if(f.isArray(m)){k=[];for(h=0,d=m.length;h<d;++h){if(h in m){k.push(f.clone(m[h]))}}}else{k=m.constructor?new m.constructor():{}}for(g in m){j=m[g];if(!(g in k)||(k[g]!==j&&(!(g in e)||e[g]!==j))){k[g]=f.clone(j)}}if(b){for(h=0;h<b;++h){g=a[h];j=m[g];if(!(g in k)||(k[g]!==j&&(!(g in e)||e[g]!==j))){k[g]=j}}}return k}})();var CIAPI=CIAPI||{};CIAPI.log=function(a){console.log(a)};var CIAPI=CIAPI||{};CIAPI.version="0.1";var CIAPI=CIAPI||{};CIAPI.services=(function(){return{ListCfdMarkets:function(b,e,d){if(d>1000){throw {message:"Can only return a maximum of 1000 pricebars"}}var c=CIAPI.dojo.clone(CIAPI.__testData.MarketList.slice(0,d));for(var a in c){c[a].Name=c[a].Name.replace("{marketName}",b)}return c},GetPriceBars:function(d,a,c,b){if(a!=="minute"){throw {message:"Only interval of 'minute' is currently supported"}}if(b>1000){throw {message:"Can only return a maximum of 1000 pricebars"}}return{PartialPriceBar:CIAPI.dojo.clone(CIAPI.__testData.PriceBars.minute[0]),PriceBars:CIAPI.dojo.clone(CIAPI.__testData.PriceBars.minute.slice(1,b+1))}}}})();var CIAPI=CIAPI||{};CIAPI.streams=(function(){return{ListenToPrice:function(b,a){setInterval(function(){var e,d,c=CIAPI.__testData.PriceBars;d=Math.random()>0.5?1:-1;e=d*c.minute[0].Close*0.05;c.minute[0].Close+=e;c.minute[0].High=(c.minute[0].Close>c.minute[0].High)?c.minute[0].Close:c.minute[0].High;c.minute[0].Low=(c.minute[0].Close<c.minute[0].Low)?c.minute[0].Close:c.minute[0].Low;a({MarketId:b,bid:c.minute[0].Close,offer:c.minute[0].Close,high:c.minute[0].High,low:c.minute[0].Low,change:e})},Math.random()*5000+1000)}}})();
